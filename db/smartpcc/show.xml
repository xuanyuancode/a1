<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"><xsl:output method="xml" indent="yes"/><xsl:strip-space elements="*"/><xsl:template match="/plist"><xml><xsl:apply-templates select="array"/></xml></xsl:template><xsl:template match="dict"><dict><xsl:apply-templates select="key"/></dict></xsl:template><xsl:template match="key"><xsl:element name="{translate(text(), ' ', '_')}"><xsl:choose><xsl:when test="following-sibling::node()[1][self::array]"><xsl:apply-templates select="following-sibling::node()[1]/dict"/></xsl:when><xsl:when test="following-sibling::node()[1][self::false|self::true]"><xsl:value-of select="following-sibling::node()[1]/local-name()"/></xsl:when><xsl:otherwise><xsl:value-of select="following-sibling::node()[1]"/></xsl:otherwise></xsl:choose></xsl:element></xsl:template></xsl:stylesheet>